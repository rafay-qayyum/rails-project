<!DOCTYPE html>
<html>
<head>
  <title><%= @course.title %></title>
  <%= stylesheet_link_tag "show_course.css" %>
</head>
<body>
  <div class="course-show">
    <h1><%= @course.title %></h1>
    <p><%= @course.description %></p>
    <h2>Chapters</h2>
    <ul class="chapters-list">
      <% @course.chapters.each do |chapter| %>
        <li><%= link_to chapter.name, course_chapter_path(@course, chapter) %></li>
      <% end %>
    </ul>
    <%if can? :manage, @course%>
    <%= link_to "Create New Chapter", new_course_chapter_path(@course), class:"button"%>
    <%end%>
    <%if can? :create, Enrollment%>

    <%= button_to "Enroll", course_enrollments_path(course_id: @course,student_id: current_student), class:"button", method: :post %>
    <%end%>
    <% if can? :destory , @enrollment%>
    <%= link_to "Unenroll", course_enrollment_path(course_id: @course, id: @enrollment,student_id: current_student), method: :delete, class:"button" %>
    <%end%>
  </div>
  <br><br>
  <%if can? :manage, @course %>
      <%= link_to "Back to Course Catalog", authenticated_instructor_root_path, class:"button"%>
        <%= link_to "Edit Course", edit_instructor_course_path(@course.instructor,@course), class:"button" %>
        <%= link_to "Delete Course", instructor_course_path(@course.instructor,@course), class:"button", data: { 'turbo-method': :delete}%>
    <%else%>
        <%= link_to "Back to Course Catalog", courses_path, class:"button"%>
    <%end%>

</body>
</html>
